{"version":3,"file":"Orders-D2nR757Y.js","sources":["../../node_modules/@vicons/ionicons5/es/CheckmarkCircleOutline.js","../../node_modules/@vicons/ionicons5/es/CreateOutline.js","../../node_modules/@vicons/ionicons5/es/EllipsisHorizontalOutline.js","../../node_modules/@vicons/ionicons5/es/RefreshOutline.js","../../node_modules/@vicons/ionicons5/es/TrashOutline.js","../../src/stores/order.ts","../../src/components/OrderFormModal.vue","../../src/views/Orders.vue"],"sourcesContent":["import { createElementVNode as _createElementVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, defineComponent } from 'vue'\nconst _hoisted_1 = {\n  xmlns: 'http://www.w3.org/2000/svg',\n  'xmlns:xlink': 'http://www.w3.org/1999/xlink',\n  viewBox: '0 0 512 512'\n}\nexport default defineComponent({\n  name: 'CheckmarkCircleOutline',\n  render: function render(_ctx, _cache) {\n    return (\n      _openBlock(),\n      _createElementBlock(\n        'svg',\n        _hoisted_1,\n        _cache[0] ||\n          (_cache[0] = [\n            _createElementVNode(\n              'path',\n              {\n                d: 'M448 256c0-106-86-192-192-192S64 150 64 256s86 192 192 192s192-86 192-192z',\n                fill: 'none',\n                stroke: 'currentColor',\n                'stroke-miterlimit': '10',\n                'stroke-width': '32'\n              },\n              null,\n              -1 /* HOISTED */\n            ),\n            _createElementVNode(\n              'path',\n              {\n                fill: 'none',\n                stroke: 'currentColor',\n                'stroke-linecap': 'round',\n                'stroke-linejoin': 'round',\n                'stroke-width': '32',\n                d: 'M352 176L217.6 336L160 272'\n              },\n              null,\n              -1 /* HOISTED */\n            )\n          ])\n      )\n    )\n  }\n})\n","import { createElementVNode as _createElementVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, defineComponent } from 'vue'\nconst _hoisted_1 = {\n  xmlns: 'http://www.w3.org/2000/svg',\n  'xmlns:xlink': 'http://www.w3.org/1999/xlink',\n  viewBox: '0 0 512 512'\n}\nexport default defineComponent({\n  name: 'CreateOutline',\n  render: function render(_ctx, _cache) {\n    return (\n      _openBlock(),\n      _createElementBlock(\n        'svg',\n        _hoisted_1,\n        _cache[0] ||\n          (_cache[0] = [\n            _createElementVNode(\n              'path',\n              {\n                d: 'M384 224v184a40 40 0 0 1-40 40H104a40 40 0 0 1-40-40V168a40 40 0 0 1 40-40h167.48',\n                fill: 'none',\n                stroke: 'currentColor',\n                'stroke-linecap': 'round',\n                'stroke-linejoin': 'round',\n                'stroke-width': '32'\n              },\n              null,\n              -1 /* HOISTED */\n            ),\n            _createElementVNode(\n              'path',\n              {\n                d: 'M459.94 53.25a16.06 16.06 0 0 0-23.22-.56L424.35 65a8 8 0 0 0 0 11.31l11.34 11.32a8 8 0 0 0 11.34 0l12.06-12c6.1-6.09 6.67-16.01.85-22.38z',\n                fill: 'currentColor'\n              },\n              null,\n              -1 /* HOISTED */\n            ),\n            _createElementVNode(\n              'path',\n              {\n                d: 'M399.34 90L218.82 270.2a9 9 0 0 0-2.31 3.93L208.16 299a3.91 3.91 0 0 0 4.86 4.86l24.85-8.35a9 9 0 0 0 3.93-2.31L422 112.66a9 9 0 0 0 0-12.66l-9.95-10a9 9 0 0 0-12.71 0z',\n                fill: 'currentColor'\n              },\n              null,\n              -1 /* HOISTED */\n            )\n          ])\n      )\n    )\n  }\n})\n","import { createElementVNode as _createElementVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, defineComponent } from 'vue'\nconst _hoisted_1 = {\n  xmlns: 'http://www.w3.org/2000/svg',\n  'xmlns:xlink': 'http://www.w3.org/1999/xlink',\n  viewBox: '0 0 512 512'\n}\nexport default defineComponent({\n  name: 'EllipsisHorizontalOutline',\n  render: function render(_ctx, _cache) {\n    return (\n      _openBlock(),\n      _createElementBlock(\n        'svg',\n        _hoisted_1,\n        _cache[0] ||\n          (_cache[0] = [\n            _createElementVNode(\n              'circle',\n              {\n                cx: '256',\n                cy: '256',\n                r: '32',\n                fill: 'none',\n                stroke: 'currentColor',\n                'stroke-miterlimit': '10',\n                'stroke-width': '32'\n              },\n              null,\n              -1 /* HOISTED */\n            ),\n            _createElementVNode(\n              'circle',\n              {\n                cx: '416',\n                cy: '256',\n                r: '32',\n                fill: 'none',\n                stroke: 'currentColor',\n                'stroke-miterlimit': '10',\n                'stroke-width': '32'\n              },\n              null,\n              -1 /* HOISTED */\n            ),\n            _createElementVNode(\n              'circle',\n              {\n                cx: '96',\n                cy: '256',\n                r: '32',\n                fill: 'none',\n                stroke: 'currentColor',\n                'stroke-miterlimit': '10',\n                'stroke-width': '32'\n              },\n              null,\n              -1 /* HOISTED */\n            )\n          ])\n      )\n    )\n  }\n})\n","import { createElementVNode as _createElementVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, defineComponent } from 'vue'\nconst _hoisted_1 = {\n  xmlns: 'http://www.w3.org/2000/svg',\n  'xmlns:xlink': 'http://www.w3.org/1999/xlink',\n  viewBox: '0 0 512 512'\n}\nexport default defineComponent({\n  name: 'RefreshOutline',\n  render: function render(_ctx, _cache) {\n    return (\n      _openBlock(),\n      _createElementBlock(\n        'svg',\n        _hoisted_1,\n        _cache[0] ||\n          (_cache[0] = [\n            _createElementVNode(\n              'path',\n              {\n                d: 'M320 146s24.36-12-64-12a160 160 0 1 0 160 160',\n                fill: 'none',\n                stroke: 'currentColor',\n                'stroke-linecap': 'round',\n                'stroke-miterlimit': '10',\n                'stroke-width': '32'\n              },\n              null,\n              -1 /* HOISTED */\n            ),\n            _createElementVNode(\n              'path',\n              {\n                fill: 'none',\n                stroke: 'currentColor',\n                'stroke-linecap': 'round',\n                'stroke-linejoin': 'round',\n                'stroke-width': '32',\n                d: 'M256 58l80 80l-80 80'\n              },\n              null,\n              -1 /* HOISTED */\n            )\n          ])\n      )\n    )\n  }\n})\n","import { openBlock as _openBlock, createElementBlock as _createElementBlock, createStaticVNode as _createStaticVNode, defineComponent } from 'vue'\nconst _hoisted_1 = {\n  xmlns: 'http://www.w3.org/2000/svg',\n  'xmlns:xlink': 'http://www.w3.org/1999/xlink',\n  viewBox: '0 0 512 512'\n}\nexport default defineComponent({\n  name: 'TrashOutline',\n  render: function render(_ctx, _cache) {\n    return _openBlock(), _createElementBlock('svg', _hoisted_1, _cache[0] || (_cache[0] = [_createStaticVNode('<path d=\"M112 112l20 320c.95 18.49 14.4 32 32 32h184c17.67 0 30.87-13.51 32-32l20-320\" fill=\"none\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"32\"></path><path stroke=\"currentColor\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"32\" d=\"M80 112h352\" fill=\"currentColor\"></path><path d=\"M192 112V72h0a23.93 23.93 0 0 1 24-24h80a23.93 23.93 0 0 1 24 24h0v40\" fill=\"none\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"32\"></path><path fill=\"none\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"32\" d=\"M256 176v224\"></path><path fill=\"none\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"32\" d=\"M184 176l8 224\"></path><path fill=\"none\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"32\" d=\"M328 176l-8 224\"></path>', 6)]))\n  }\n})\n","import { defineStore } from 'pinia'\nimport { ref } from 'vue'\nimport { supabase, TABLES } from '@/utils/supabase'\nimport type { Order, Pagination } from '@/types'\n\ninterface OrderFilter {\n  keyword?: string\n  status?: string | null\n  customer_id?: string | null\n  date_from?: string\n  date_to?: string\n}\n\nexport const useOrderStore = defineStore('order', () => {\n  const orders = ref<Order[]>([])\n  const currentOrder = ref<Order | null>(null)\n  const loading = ref(false)\n  const pagination = ref<Pagination>({\n    page: 1,\n    pageSize: 20,\n    total: 0\n  })\n\n  /**\n   * 获取订单列表（支持筛选）\n   */\n  async function fetchOrders(filters?: OrderFilter): Promise<void> {\n    loading.value = true\n    try {\n      let query = supabase\n        .from(TABLES.ORDERS)\n        .select('*, customer:customers(id, code, company, contact)', { count: 'exact' })\n\n      // 应用筛选条件\n      if (filters) {\n        // 关键词搜索（订单号或产品）\n        if (filters.keyword) {\n          query = query.or(`order_no.ilike.%${filters.keyword}%,product.ilike.%${filters.keyword}%`)\n        }\n\n        // 订单状态筛选\n        if (filters.status) {\n          query = query.eq('status', filters.status)\n        }\n\n        // 客户筛选\n        if (filters.customer_id) {\n          query = query.eq('customer_id', filters.customer_id)\n        }\n\n        // 日期范围筛选\n        if (filters.date_from) {\n          query = query.gte('create_date', filters.date_from)\n        }\n        if (filters.date_to) {\n          query = query.lte('create_date', filters.date_to)\n        }\n      }\n\n      const from = (pagination.value.page - 1) * pagination.value.pageSize\n      const to = from + pagination.value.pageSize - 1\n\n      const { data, error, count } = await query\n        .order('create_date', { ascending: false })\n        .range(from, to)\n\n      if (error) throw error\n\n      orders.value = data || []\n      pagination.value.total = count || 0\n    } catch (error) {\n      console.error('Failed to fetch orders:', error)\n      throw error\n    } finally {\n      loading.value = false\n    }\n  }\n\n  /**\n   * 获取客户的订单列表\n   */\n  async function fetchOrdersByCustomer(customerId: string): Promise<Order[]> {\n    loading.value = true\n    try {\n      const { data, error } = await supabase\n        .from(TABLES.ORDERS)\n        .select('*, customer:customers(id, code, company, contact)')\n        .eq('customer_id', customerId)\n        .order('create_date', { ascending: false })\n\n      if (error) throw error\n\n      return data || []\n    } catch (error) {\n      console.error('Failed to fetch customer orders:', error)\n      return []\n    } finally {\n      loading.value = false\n    }\n  }\n\n  /**\n   * 获取单个订单\n   */\n  async function fetchOrderById(id: string): Promise<Order | null> {\n    loading.value = true\n    try {\n      const { data, error } = await supabase\n        .from(TABLES.ORDERS)\n        .select('*, customer:customers(id, code, company, contact)')\n        .eq('id', id)\n        .single()\n\n      if (error) throw error\n\n      currentOrder.value = data\n      return data\n    } catch (error) {\n      console.error('Failed to fetch order:', error)\n      return null\n    } finally {\n      loading.value = false\n    }\n  }\n\n  /**\n   * 创建订单\n   */\n  async function createOrder(order: Partial<Order>): Promise<any> {\n    loading.value = true\n    try {\n      const { data, error } = await supabase\n        .from(TABLES.ORDERS)\n        .insert(order)\n        .select('*, customer:customers(id, code, company, contact)')\n        .single()\n\n      if (error) return error\n\n      if (data) {\n        orders.value.unshift(data)\n        pagination.value.total++\n      }\n\n      return null\n    } catch (error) {\n      console.error('Failed to create order:', error)\n      return error\n    } finally {\n      loading.value = false\n    }\n  }\n\n  /**\n   * 更新订单\n   */\n  async function updateOrder(id: string, updates: Partial<Order>): Promise<any> {\n    loading.value = true\n    try {\n      const { data, error } = await supabase\n        .from(TABLES.ORDERS)\n        .update(updates)\n        .eq('id', id)\n        .select('*, customer:customers(id, code, company, contact)')\n        .single()\n\n      if (error) return error\n\n      if (data) {\n        const index = orders.value.findIndex(o => o.id === id)\n        if (index !== -1) {\n          orders.value[index] = data\n        }\n\n        if (currentOrder.value?.id === id) {\n          currentOrder.value = { ...currentOrder.value, ...data }\n        }\n      }\n\n      return null\n    } catch (error) {\n      console.error('Failed to update order:', error)\n      return error\n    } finally {\n      loading.value = false\n    }\n  }\n\n  /**\n   * 删除订单\n   */\n  async function deleteOrder(id: string): Promise<any> {\n    loading.value = true\n    try {\n      const { error } = await supabase.from(TABLES.ORDERS).delete().eq('id', id)\n\n      if (error) return error\n\n      orders.value = orders.value.filter(o => o.id !== id)\n      pagination.value.total--\n\n      if (currentOrder.value?.id === id) {\n        currentOrder.value = null\n      }\n\n      return null\n    } catch (error) {\n      console.error('Failed to delete order:', error)\n      return error\n    } finally {\n      loading.value = false\n    }\n  }\n\n  return {\n    orders,\n    currentOrder,\n    loading,\n    pagination,\n    fetchOrders,\n    fetchOrdersByCustomer,\n    fetchOrderById,\n    createOrder,\n    updateOrder,\n    deleteOrder\n  }\n})\n","<template>\n  <n-modal\n    v-model:show=\"isVisible\"\n    preset=\"card\"\n    :title=\"isEditing ? '编辑订单' : '新增订单'\"\n    style=\"width: 600px;\"\n    :mask-closable=\"false\"\n  >\n    <n-form\n      ref=\"formRef\"\n      :model=\"formData\"\n      :rules=\"rules\"\n      label-placement=\"left\"\n      label-width=\"100\"\n      require-mark-placement=\"right-hanging\"\n    >\n      <n-form-item label=\"客户\" path=\"customer_id\">\n        <n-select\n          v-model:value=\"formData.customer_id\"\n          :options=\"customerOptions\"\n          placeholder=\"请选择客户\"\n          filterable\n          clearable\n          @update:value=\"handleCustomerChange\"\n        />\n      </n-form-item>\n\n      <n-form-item label=\"订单号\" path=\"order_no\">\n        <n-input\n          v-model:value=\"formData.order_no\"\n          placeholder=\"自动生成或手动输入\"\n        />\n      </n-form-item>\n\n      <n-form-item label=\"产品\" path=\"product\">\n        <n-input\n          v-model:value=\"formData.product\"\n          placeholder=\"请输入产品名称\"\n          type=\"textarea\"\n          :autosize=\"{ minRows: 2, maxRows: 4 }\"\n        />\n      </n-form-item>\n\n      <n-form-item label=\"利润 (USD)\" path=\"profit\">\n        <n-input-number\n          v-model:value=\"formData.profit\"\n          placeholder=\"请输入利润金额\"\n          :min=\"0\"\n          :precision=\"2\"\n          style=\"width: 100%;\"\n        >\n          <template #prefix>$</template>\n        </n-input-number>\n      </n-form-item>\n\n      <n-form-item label=\"订单状态\" path=\"status\">\n        <n-select\n          v-model:value=\"formData.status\"\n          :options=\"statusOptions\"\n          placeholder=\"请选择订单状态\"\n        />\n      </n-form-item>\n\n      <n-form-item label=\"创建日期\" path=\"create_date\">\n        <n-date-picker\n          v-model:value=\"formData.create_date\"\n          type=\"date\"\n          clearable\n          style=\"width: 100%;\"\n        />\n      </n-form-item>\n\n      <n-form-item label=\"备注\" path=\"remark\">\n        <n-input\n          v-model:value=\"formData.remark\"\n          placeholder=\"请输入备注信息\"\n          type=\"textarea\"\n          :autosize=\"{ minRows: 3, maxRows: 6 }\"\n        />\n      </n-form-item>\n    </n-form>\n\n    <template #footer>\n      <n-space justify=\"end\">\n        <n-button @click=\"handleCancel\">取消</n-button>\n        <n-button type=\"primary\" :loading=\"loading\" @click=\"handleSubmit\">\n          {{ isEditing ? '保存' : '创建' }}\n        </n-button>\n      </n-space>\n    </template>\n  </n-modal>\n</template>\n\n<script setup lang=\"ts\">\nimport { ref, computed, watch } from 'vue'\nimport {\n  NModal,\n  NForm,\n  NFormItem,\n  NInput,\n  NInputNumber,\n  NSelect,\n  NDatePicker,\n  NButton,\n  NSpace,\n  useMessage,\n  type FormInst,\n  type FormRules\n} from 'naive-ui'\nimport type { Order, Customer } from '@/types'\nimport { useOrderStore } from '@/stores/order'\nimport { useCustomerStore } from '@/stores/customer'\nimport { getOrderStatusLabel } from '@/utils/helpers'\n\ninterface Props {\n  visible: boolean\n  order?: Order | null\n}\n\nconst props = withDefaults(defineProps<Props>(), {\n  order: null\n})\n\nconst emit = defineEmits<{\n  (e: 'update:visible', value: boolean): void\n  (e: 'success'): void\n}>()\n\nconst message = useMessage()\nconst orderStore = useOrderStore()\nconst customerStore = useCustomerStore()\n\nconst formRef = ref<FormInst | null>(null)\nconst loading = ref(false)\n\nconst isEditing = computed(() => !!props.order)\nconst isVisible = computed({\n  get: () => props.visible,\n  set: (value) => emit('update:visible', value)\n})\n\nconst formData = ref({\n  customer_id: '',\n  order_no: '',\n  product: '',\n  profit: 0,\n  status: 'pending' as const,\n  create_date: Date.now(),\n  remark: ''\n})\n\n// 客户选项\nconst customerOptions = computed(() => {\n  return customerStore.customers.map((customer: Customer) => ({\n    label: `${customer.code} - ${customer.company}`,\n    value: customer.id\n  }))\n})\n\n// 订单状态选项\nconst statusOptions = [\n  { label: getOrderStatusLabel('pending'), value: 'pending' },\n  { label: getOrderStatusLabel('confirmed'), value: 'confirmed' },\n  { label: getOrderStatusLabel('production'), value: 'production' },\n  { label: getOrderStatusLabel('shipped'), value: 'shipped' },\n  { label: getOrderStatusLabel('completed'), value: 'completed' },\n  { label: getOrderStatusLabel('cancelled'), value: 'cancelled' }\n]\n\nconst rules: FormRules = {\n  customer_id: [{ required: true, message: '请选择客户', trigger: 'change' }],\n  order_no: [{ required: true, message: '请输入订单号', trigger: 'blur' }],\n  product: [{ required: true, message: '请输入产品', trigger: 'blur' }],\n  status: [{ required: true, message: '请选择订单状态', trigger: 'change' }],\n  create_date: [{ required: true, type: 'number', message: '请选择创建日期', trigger: 'change' }]\n}\n\n// 客户选择变化时自动填充产品\nfunction handleCustomerChange(customerId: string) {\n  const customer = customerStore.customers.find((c: Customer) => c.id === customerId)\n  if (customer && !isEditing.value) {\n    formData.value.product = customer.product || ''\n  }\n}\n\n// 生成订单号\nfunction generateOrderNo(): string {\n  const now = new Date()\n  const year = now.getFullYear()\n  const month = String(now.getMonth() + 1).padStart(2, '0')\n  const day = String(now.getDate()).padStart(2, '0')\n  const random = Math.floor(Math.random() * 1000).toString().padStart(3, '0')\n  return `ORD${year}${month}${day}${random}`\n}\n\n// 重置表单\nfunction resetForm() {\n  formData.value = {\n    customer_id: '',\n    order_no: generateOrderNo(),\n    product: '',\n    profit: 0,\n    status: 'pending',\n    create_date: Date.now(),\n    remark: ''\n  }\n}\n\n// 填充表单\nfunction fillForm(order: Order) {\n  formData.value = {\n    customer_id: order.customer_id,\n    order_no: order.order_no,\n    product: order.product,\n    profit: order.profit || 0,\n    status: order.status,\n    create_date: new Date(order.create_date).getTime(),\n    remark: order.remark || ''\n  }\n}\n\n// 提交表单\nasync function handleSubmit() {\n  if (!formRef.value) return\n\n  try {\n    await formRef.value.validate()\n    loading.value = true\n\n    const orderData = {\n      customer_id: formData.value.customer_id,\n      order_no: formData.value.order_no,\n      product: formData.value.product,\n      profit: formData.value.profit,\n      status: formData.value.status,\n      create_date: new Date(formData.value.create_date).toISOString().split('T')[0],\n      remark: formData.value.remark\n    }\n\n    let error\n    if (isEditing.value && props.order) {\n      error = await orderStore.updateOrder(props.order.id, orderData)\n    } else {\n      error = await orderStore.createOrder(orderData)\n    }\n\n    if (error) {\n      message.error(error.message || '操作失败')\n    } else {\n      message.success(isEditing.value ? '订单已更新' : '订单已创建')\n      emit('success')\n      isVisible.value = false\n    }\n  } catch (e) {\n    // 表单验证失败\n  } finally {\n    loading.value = false\n  }\n}\n\n// 取消\nfunction handleCancel() {\n  isVisible.value = false\n}\n\n// 监听弹窗显示状态\nwatch(() => props.visible, (visible) => {\n  if (visible) {\n    if (props.order) {\n      fillForm(props.order)\n    } else {\n      resetForm()\n    }\n    // 加载客户列表\n    if (customerStore.customers.length === 0) {\n      customerStore.fetchCustomers()\n    }\n  }\n})\n</script>\n","<template>\n  <div class=\"orders-view\">\n    <n-card title=\"订单管理\" :bordered=\"false\">\n      <!-- 搜索和筛选 -->\n      <template #header-extra>\n        <n-space>\n          <n-button type=\"primary\" @click=\"handleAdd\">\n            <template #icon>\n              <n-icon><AddOutline /></n-icon>\n            </template>\n            新增订单\n          </n-button>\n          <n-button @click=\"handleRefresh\">\n            <template #icon>\n              <n-icon><RefreshOutline /></n-icon>\n            </template>\n            刷新\n          </n-button>\n        </n-space>\n      </template>\n\n      <!-- 筛选条件 -->\n      <n-space vertical size=\"large\">\n        <n-space>\n          <n-input\n            v-model:value=\"filters.keyword\"\n            placeholder=\"搜索订单号、产品\"\n            style=\"width: 250px;\"\n            clearable\n            @update:value=\"handleSearch\"\n          >\n            <template #prefix>\n              <n-icon><SearchOutline /></n-icon>\n            </template>\n          </n-input>\n\n          <n-select\n            v-model:value=\"filters.status\"\n            placeholder=\"订单状态\"\n            style=\"width: 150px;\"\n            clearable\n            :options=\"statusOptions\"\n            @update:value=\"handleSearch\"\n          />\n\n          <n-select\n            v-model:value=\"filters.customer_id\"\n            placeholder=\"客户筛选\"\n            style=\"width: 200px;\"\n            clearable\n            filterable\n            :options=\"customerOptions\"\n            @update:value=\"handleSearch\"\n          />\n\n          <n-date-picker\n            v-model:value=\"dateRange\"\n            type=\"daterange\"\n            clearable\n            placeholder=\"创建日期范围\"\n            @update:value=\"handleDateChange\"\n          />\n        </n-space>\n\n        <!-- 统计卡片 -->\n        <n-grid :cols=\"4\" :x-gap=\"16\">\n          <n-gi>\n            <n-statistic label=\"订单总数\" :value=\"orderStore.pagination.total\">\n              <template #prefix>\n                <n-icon size=\"20\" color=\"#18a058\"><DocumentTextOutline /></n-icon>\n              </template>\n            </n-statistic>\n          </n-gi>\n          <n-gi>\n            <n-statistic label=\"已完成\" :value=\"getStatusCount('completed')\">\n              <template #prefix>\n                <n-icon size=\"20\" color=\"#2080f0\"><CheckmarkCircleOutline /></n-icon>\n              </template>\n            </n-statistic>\n          </n-gi>\n          <n-gi>\n            <n-statistic label=\"生产中\" :value=\"getStatusCount('production')\">\n              <template #prefix>\n                <n-icon size=\"20\" color=\"#f0a020\"><TimeOutline /></n-icon>\n              </template>\n            </n-statistic>\n          </n-gi>\n          <n-gi>\n            <n-statistic\n              label=\"总利润 (USD)\"\n              :value=\"getTotalProfit()\"\n              :precision=\"2\"\n            >\n              <template #prefix>\n                <n-icon size=\"20\" color=\"#d03050\"><CashOutline /></n-icon>\n              </template>\n            </n-statistic>\n          </n-gi>\n        </n-grid>\n\n        <!-- 订单列表 -->\n        <n-data-table\n          :columns=\"columns\"\n          :data=\"orderStore.orders\"\n          :loading=\"orderStore.loading\"\n          :pagination=\"pagination\"\n          :row-key=\"(row: Order) => row.id\"\n          :bordered=\"false\"\n          striped\n        />\n      </n-space>\n    </n-card>\n\n    <!-- 订单表单弹窗 -->\n    <OrderFormModal\n      v-model:visible=\"showFormModal\"\n      :order=\"selectedOrder\"\n      @success=\"handleSuccess\"\n    />\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport { ref, computed, onMounted, h } from 'vue'\nimport {\n  NCard,\n  NSpace,\n  NButton,\n  NIcon,\n  NInput,\n  NSelect,\n  NDatePicker,\n  NDataTable,\n  NTag,\n  NStatistic,\n  NGrid,\n  NGi,\n  NDropdown,\n  useMessage,\n  useDialog,\n  type DataTableColumns,\n  type PaginationProps\n} from 'naive-ui'\nimport {\n  AddOutline,\n  SearchOutline,\n  RefreshOutline,\n  DocumentTextOutline,\n  CheckmarkCircleOutline,\n  TimeOutline,\n  CashOutline,\n  EllipsisHorizontalOutline,\n  CreateOutline,\n  TrashOutline\n} from '@vicons/ionicons5'\nimport type { Order, Customer } from '@/types'\nimport { useOrderStore } from '@/stores/order'\nimport { useCustomerStore } from '@/stores/customer'\nimport OrderFormModal from '@/components/OrderFormModal.vue'\nimport { formatDate, getOrderStatusLabel, getOrderStatusType } from '@/utils/helpers'\nimport { debounce } from '@/utils/helpers'\n\nconst message = useMessage()\nconst dialog = useDialog()\nconst orderStore = useOrderStore()\nconst customerStore = useCustomerStore()\n\nconst showFormModal = ref(false)\nconst selectedOrder = ref<Order | null>(null)\nconst dateRange = ref<[number, number] | null>(null)\n\nconst filters = ref({\n  keyword: '',\n  status: null as string | null,\n  customer_id: null as string | null,\n  date_from: '',\n  date_to: ''\n})\n\n// 客户选项\nconst customerOptions = computed(() => {\n  return customerStore.customers.map((customer: Customer) => ({\n    label: `${customer.code} - ${customer.company}`,\n    value: customer.id\n  }))\n})\n\n// 订单状态选项\nconst statusOptions = [\n  { label: getOrderStatusLabel('pending'), value: 'pending' },\n  { label: getOrderStatusLabel('confirmed'), value: 'confirmed' },\n  { label: getOrderStatusLabel('production'), value: 'production' },\n  { label: getOrderStatusLabel('shipped'), value: 'shipped' },\n  { label: getOrderStatusLabel('completed'), value: 'completed' },\n  { label: getOrderStatusLabel('cancelled'), value: 'cancelled' }\n]\n\n// 分页配置\nconst pagination = computed<PaginationProps>(() => ({\n  page: orderStore.pagination.page,\n  pageSize: orderStore.pagination.pageSize,\n  pageCount: Math.ceil(orderStore.pagination.total / orderStore.pagination.pageSize),\n  itemCount: orderStore.pagination.total,\n  showSizePicker: true,\n  pageSizes: [10, 20, 50, 100],\n  onChange: (page: number) => {\n    orderStore.pagination.page = page\n    loadOrders()\n  },\n  onUpdatePageSize: (pageSize: number) => {\n    orderStore.pagination.pageSize = pageSize\n    orderStore.pagination.page = 1\n    loadOrders()\n  }\n}))\n\n// 表格列定义\nconst columns = computed<DataTableColumns<Order>>(() => [\n  {\n    title: '订单号',\n    key: 'order_no',\n    width: 150,\n    ellipsis: { tooltip: true }\n  },\n  {\n    title: '客户',\n    key: 'customer',\n    width: 180,\n    ellipsis: { tooltip: true },\n    render: (row: Order) => row.customer?.company || '-'\n  },\n  {\n    title: '产品',\n    key: 'product',\n    ellipsis: { tooltip: true },\n    render: (row: Order) => row.product || '-'\n  },\n  {\n    title: '利润 (USD)',\n    key: 'profit',\n    width: 120,\n    align: 'right',\n    render: (row: Order) => row.profit ? `$${row.profit.toFixed(2)}` : '-'\n  },\n  {\n    title: '状态',\n    key: 'status',\n    width: 100,\n    render: (row: Order) => h(\n      NTag,\n      { type: getOrderStatusType(row.status), size: 'small' },\n      { default: () => getOrderStatusLabel(row.status) }\n    )\n  },\n  {\n    title: '创建日期',\n    key: 'create_date',\n    width: 120,\n    render: (row: Order) => formatDate(row.create_date)\n  },\n  {\n    title: '操作',\n    key: 'actions',\n    width: 80,\n    align: 'center',\n    render: (row: Order) => h(\n      NDropdown,\n      {\n        trigger: 'click',\n        options: [\n          {\n            label: '编辑',\n            key: 'edit',\n            icon: () => h(NIcon, null, { default: () => h(CreateOutline) })\n          },\n          {\n            label: '删除',\n            key: 'delete',\n            icon: () => h(NIcon, null, { default: () => h(TrashOutline) })\n          }\n        ],\n        onSelect: (key: string) => handleAction(key, row)\n      },\n      {\n        default: () => h(\n          NButton,\n          { text: true, size: 'small' },\n          { icon: () => h(NIcon, { size: 20 }, { default: () => h(EllipsisHorizontalOutline) }) }\n        )\n      }\n    )\n  }\n])\n\n// 获取各状态订单数量\nfunction getStatusCount(status: string): number {\n  return orderStore.orders.filter((order: Order) => order.status === status).length\n}\n\n// 获取总利润\nfunction getTotalProfit(): number {\n  return orderStore.orders.reduce((sum: number, order: Order) => sum + (order.profit || 0), 0)\n}\n\n// 加载订单列表\nasync function loadOrders() {\n  try {\n    await orderStore.fetchOrders(filters.value)\n  } catch (error: any) {\n    message.error('加载订单失败：' + error.message)\n  }\n}\n\n// 搜索（防抖）\nconst handleSearch = debounce(() => {\n  orderStore.pagination.page = 1\n  loadOrders()\n}, 300)\n\n// 日期范围变化\nfunction handleDateChange(value: [number, number] | null) {\n  if (value) {\n    filters.value.date_from = new Date(value[0]).toISOString().split('T')[0]\n    filters.value.date_to = new Date(value[1]).toISOString().split('T')[0]\n  } else {\n    filters.value.date_from = ''\n    filters.value.date_to = ''\n  }\n  handleSearch()\n}\n\n// 新增订单\nfunction handleAdd() {\n  selectedOrder.value = null\n  showFormModal.value = true\n}\n\n// 刷新\nfunction handleRefresh() {\n  loadOrders()\n}\n\n// 操作处理\nfunction handleAction(action: string, order: Order) {\n  if (action === 'edit') {\n    selectedOrder.value = order\n    showFormModal.value = true\n  } else if (action === 'delete') {\n    handleDelete(order)\n  }\n}\n\n// 删除订单\nfunction handleDelete(order: Order) {\n  dialog.warning({\n    title: '确认删除',\n    content: `确定要删除订单 \"${order.order_no}\" 吗？此操作不可恢复。`,\n    positiveText: '删除',\n    negativeText: '取消',\n    onPositiveClick: async () => {\n      const error = await orderStore.deleteOrder(order.id)\n      if (error) {\n        message.error('删除失败：' + error.message)\n      } else {\n        message.success('订单已删除')\n        loadOrders()\n      }\n    }\n  })\n}\n\n// 操作成功后刷新\nfunction handleSuccess() {\n  loadOrders()\n}\n\nonMounted(() => {\n  loadOrders()\n  // 加载客户列表用于筛选\n  if (customerStore.customers.length === 0) {\n    customerStore.fetchCustomers()\n  }\n})\n</script>\n\n<style scoped>\n.orders-view {\n  height: 100%;\n  overflow-y: auto;\n}\n\n:deep(.n-statistic) {\n  text-align: center;\n  padding: 16px;\n  background: #fafafa;\n  border-radius: 8px;\n}\n\n:deep(.n-data-table) {\n  margin-top: 8px;\n}\n</style>\n"],"names":["_hoisted_1","CheckmarkCircleOutline","defineComponent","_ctx","_cache","_openBlock","_createElementBlock","_createElementVNode","CreateOutline","EllipsisHorizontalOutline","RefreshOutline","TrashOutline","_createStaticVNode","useOrderStore","defineStore","orders","ref","currentOrder","loading","pagination","fetchOrders","filters","query","supabase","TABLES","from","to","data","error","count","fetchOrdersByCustomer","customerId","fetchOrderById","id","createOrder","order","updateOrder","updates","index","o","deleteOrder","props","__props","emit","__emit","message","useMessage","orderStore","customerStore","useCustomerStore","formRef","isEditing","computed","isVisible","value","formData","customerOptions","customer","statusOptions","getOrderStatusLabel","rules","handleCustomerChange","c","generateOrderNo","now","year","month","day","random","resetForm","fillForm","handleSubmit","orderData","handleCancel","watch","visible","_createBlock","_unref","NModal","$event","_createVNode","NSpace","NButton","NForm","NFormItem","NSelect","NInput","NInputNumber","NDatePicker","dialog","useDialog","showFormModal","selectedOrder","dateRange","page","loadOrders","pageSize","columns","row","h","NTag","getOrderStatusType","formatDate","NDropdown","NIcon","key","handleAction","getStatusCount","status","getTotalProfit","sum","handleSearch","debounce","handleDateChange","handleAdd","handleRefresh","action","handleDelete","handleSuccess","onMounted","NCard","AddOutline","SearchOutline","NGrid","NGi","NStatistic","DocumentTextOutline","TimeOutline","CashOutline","NDataTable","OrderFormModal"],"mappings":"8uBACA,MAAMA,GAAa,CACjB,MAAO,6BACP,cAAe,+BACf,QAAS,aACX,EACAC,GAAeC,EAAgB,CAC7B,KAAM,yBACN,OAAQ,SAAgBC,EAAMC,EAAQ,CACpC,OACEC,EAAU,EACVC,EACE,MACAN,GACAI,EAAO,CAAC,IACLA,EAAO,CAAC,EAAI,CACXG,EACE,OACA,CACE,EAAG,6EACH,KAAM,OACN,OAAQ,eACR,oBAAqB,KACrB,eAAgB,IAChC,EACc,KACA,EACd,EACYA,EACE,OACA,CACE,KAAM,OACN,OAAQ,eACR,iBAAkB,QAClB,kBAAmB,QACnB,eAAgB,KAChB,EAAG,4BACnB,EACc,KACA,EACd,CACA,EACA,CAEE,CACF,CAAC,EC5CKP,GAAa,CACjB,MAAO,6BACP,cAAe,+BACf,QAAS,aACX,EACAQ,GAAeN,EAAgB,CAC7B,KAAM,gBACN,OAAQ,SAAgBC,EAAMC,EAAQ,CACpC,OACEC,EAAU,EACVC,EACE,MACAN,GACAI,EAAO,CAAC,IACLA,EAAO,CAAC,EAAI,CACXG,EACE,OACA,CACE,EAAG,oFACH,KAAM,OACN,OAAQ,eACR,iBAAkB,QAClB,kBAAmB,QACnB,eAAgB,IAChC,EACc,KACA,EACd,EACYA,EACE,OACA,CACE,EAAG,6IACH,KAAM,cACtB,EACc,KACA,EACd,EACYA,EACE,OACA,CACE,EAAG,2KACH,KAAM,cACtB,EACc,KACA,EACd,CACA,EACA,CAEE,CACF,CAAC,EClDKP,GAAa,CACjB,MAAO,6BACP,cAAe,+BACf,QAAS,aACX,EACAS,GAAeP,EAAgB,CAC7B,KAAM,4BACN,OAAQ,SAAgBC,EAAMC,EAAQ,CACpC,OACEC,EAAU,EACVC,EACE,MACAN,GACAI,EAAO,CAAC,IACLA,EAAO,CAAC,EAAI,CACXG,EACE,SACA,CACE,GAAI,MACJ,GAAI,MACJ,EAAG,KACH,KAAM,OACN,OAAQ,eACR,oBAAqB,KACrB,eAAgB,IAChC,EACc,KACA,EACd,EACYA,EACE,SACA,CACE,GAAI,MACJ,GAAI,MACJ,EAAG,KACH,KAAM,OACN,OAAQ,eACR,oBAAqB,KACrB,eAAgB,IAChC,EACc,KACA,EACd,EACYA,EACE,SACA,CACE,GAAI,KACJ,GAAI,MACJ,EAAG,KACH,KAAM,OACN,OAAQ,eACR,oBAAqB,KACrB,eAAgB,IAChC,EACc,KACA,EACd,CACA,EACA,CAEE,CACF,CAAC,EC7DKP,GAAa,CACjB,MAAO,6BACP,cAAe,+BACf,QAAS,aACX,EACAU,GAAeR,EAAgB,CAC7B,KAAM,iBACN,OAAQ,SAAgBC,EAAMC,EAAQ,CACpC,OACEC,EAAU,EACVC,EACE,MACAN,GACAI,EAAO,CAAC,IACLA,EAAO,CAAC,EAAI,CACXG,EACE,OACA,CACE,EAAG,gDACH,KAAM,OACN,OAAQ,eACR,iBAAkB,QAClB,oBAAqB,KACrB,eAAgB,IAChC,EACc,KACA,EACd,EACYA,EACE,OACA,CACE,KAAM,OACN,OAAQ,eACR,iBAAkB,QAClB,kBAAmB,QACnB,eAAgB,KAChB,EAAG,sBACnB,EACc,KACA,EACd,CACA,EACA,CAEE,CACF,CAAC,EC7CKP,GAAa,CACjB,MAAO,6BACP,cAAe,+BACf,QAAS,aACX,EACAW,GAAeT,EAAgB,CAC7B,KAAM,eACN,OAAQ,SAAgBC,EAAMC,EAAQ,CACpC,OAAOC,EAAU,EAAIC,EAAoB,MAAON,GAAYI,EAAO,CAAC,IAAMA,EAAO,CAAC,EAAI,CAACQ,EAAmB,64BAA84B,CAAC,CAAC,EAAE,CAC9/B,CACF,CAAC,ECEYC,EAAgBC,EAAY,QAAS,IAAM,CACtD,MAAMC,EAASC,EAAa,EAAE,EACxBC,EAAeD,EAAkB,IAAI,EACrCE,EAAUF,EAAI,EAAK,EACnBG,EAAaH,EAAgB,CACjC,KAAM,EACN,SAAU,GACV,MAAO,CAAA,CACR,EAKD,eAAeI,EAAYC,EAAsC,CAC/DH,EAAQ,MAAQ,GAChB,GAAI,CACF,IAAII,EAAQC,EACT,KAAKC,EAAO,MAAM,EAClB,OAAO,oDAAqD,CAAE,MAAO,OAAA,CAAS,EAG7EH,IAEEA,EAAQ,UACVC,EAAQA,EAAM,GAAG,mBAAmBD,EAAQ,OAAO,oBAAoBA,EAAQ,OAAO,GAAG,GAIvFA,EAAQ,SACVC,EAAQA,EAAM,GAAG,SAAUD,EAAQ,MAAM,GAIvCA,EAAQ,cACVC,EAAQA,EAAM,GAAG,cAAeD,EAAQ,WAAW,GAIjDA,EAAQ,YACVC,EAAQA,EAAM,IAAI,cAAeD,EAAQ,SAAS,GAEhDA,EAAQ,UACVC,EAAQA,EAAM,IAAI,cAAeD,EAAQ,OAAO,IAIpD,MAAMI,GAAQN,EAAW,MAAM,KAAO,GAAKA,EAAW,MAAM,SACtDO,EAAKD,EAAON,EAAW,MAAM,SAAW,EAExC,CAAE,KAAAQ,EAAM,MAAAC,EAAO,MAAAC,CAAA,EAAU,MAAMP,EAClC,MAAM,cAAe,CAAE,UAAW,EAAA,CAAO,EACzC,MAAMG,EAAMC,CAAE,EAEjB,GAAIE,EAAO,MAAMA,EAEjBb,EAAO,MAAQY,GAAQ,CAAA,EACvBR,EAAW,MAAM,MAAQU,GAAS,CACpC,OAASD,EAAO,CACd,cAAQ,MAAM,0BAA2BA,CAAK,EACxCA,CACR,QAAA,CACEV,EAAQ,MAAQ,EAClB,CACF,CAKA,eAAeY,EAAsBC,EAAsC,CACzEb,EAAQ,MAAQ,GAChB,GAAI,CACF,KAAM,CAAE,KAAAS,EAAM,MAAAC,GAAU,MAAML,EAC3B,KAAKC,EAAO,MAAM,EAClB,OAAO,mDAAmD,EAC1D,GAAG,cAAeO,CAAU,EAC5B,MAAM,cAAe,CAAE,UAAW,GAAO,EAE5C,GAAIH,EAAO,MAAMA,EAEjB,OAAOD,GAAQ,CAAA,CACjB,OAASC,EAAO,CACd,eAAQ,MAAM,mCAAoCA,CAAK,EAChD,CAAA,CACT,QAAA,CACEV,EAAQ,MAAQ,EAClB,CACF,CAKA,eAAec,EAAeC,EAAmC,CAC/Df,EAAQ,MAAQ,GAChB,GAAI,CACF,KAAM,CAAE,KAAAS,EAAM,MAAAC,CAAA,EAAU,MAAML,EAC3B,KAAKC,EAAO,MAAM,EAClB,OAAO,mDAAmD,EAC1D,GAAG,KAAMS,CAAE,EACX,OAAA,EAEH,GAAIL,EAAO,MAAMA,EAEjB,OAAAX,EAAa,MAAQU,EACdA,CACT,OAASC,EAAO,CACd,eAAQ,MAAM,yBAA0BA,CAAK,EACtC,IACT,QAAA,CACEV,EAAQ,MAAQ,EAClB,CACF,CAKA,eAAegB,EAAYC,EAAqC,CAC9DjB,EAAQ,MAAQ,GAChB,GAAI,CACF,KAAM,CAAE,KAAAS,EAAM,MAAAC,CAAA,EAAU,MAAML,EAC3B,KAAKC,EAAO,MAAM,EAClB,OAAOW,CAAK,EACZ,OAAO,mDAAmD,EAC1D,OAAA,EAEH,OAAIP,IAEAD,IACFZ,EAAO,MAAM,QAAQY,CAAI,EACzBR,EAAW,MAAM,SAGZ,KACT,OAASS,EAAO,CACd,eAAQ,MAAM,0BAA2BA,CAAK,EACvCA,CACT,QAAA,CACEV,EAAQ,MAAQ,EAClB,CACF,CAKA,eAAekB,EAAYH,EAAYI,EAAuC,CAC5EnB,EAAQ,MAAQ,GAChB,GAAI,CACF,KAAM,CAAE,KAAAS,EAAM,MAAAC,CAAA,EAAU,MAAML,EAC3B,KAAKC,EAAO,MAAM,EAClB,OAAOa,CAAO,EACd,GAAG,KAAMJ,CAAE,EACX,OAAO,mDAAmD,EAC1D,OAAA,EAEH,GAAIL,EAAO,OAAOA,EAElB,GAAID,EAAM,CACR,MAAMW,EAAQvB,EAAO,MAAM,UAAUwB,GAAKA,EAAE,KAAON,CAAE,EACjDK,IAAU,KACZvB,EAAO,MAAMuB,CAAK,EAAIX,GAGpBV,EAAa,OAAO,KAAOgB,IAC7BhB,EAAa,MAAQ,CAAE,GAAGA,EAAa,MAAO,GAAGU,CAAA,EAErD,CAEA,OAAO,IACT,OAASC,EAAO,CACd,eAAQ,MAAM,0BAA2BA,CAAK,EACvCA,CACT,QAAA,CACEV,EAAQ,MAAQ,EAClB,CACF,CAKA,eAAesB,EAAYP,EAA0B,CACnDf,EAAQ,MAAQ,GAChB,GAAI,CACF,KAAM,CAAE,MAAAU,CAAA,EAAU,MAAML,EAAS,KAAKC,EAAO,MAAM,EAAE,OAAA,EAAS,GAAG,KAAMS,CAAE,EAEzE,OAAIL,IAEJb,EAAO,MAAQA,EAAO,MAAM,OAAOwB,GAAKA,EAAE,KAAON,CAAE,EACnDd,EAAW,MAAM,QAEbF,EAAa,OAAO,KAAOgB,IAC7BhB,EAAa,MAAQ,MAGhB,KACT,OAASW,EAAO,CACd,eAAQ,MAAM,0BAA2BA,CAAK,EACvCA,CACT,QAAA,CACEV,EAAQ,MAAQ,EAClB,CACF,CAEA,MAAO,CACL,OAAAH,EACA,aAAAE,EACA,QAAAC,EACA,WAAAC,EACA,YAAAC,EACA,sBAAAU,EACA,eAAAE,EACA,YAAAE,EACA,YAAAE,EACA,YAAAI,CAAA,CAEJ,CAAC,yIC3GD,MAAMC,EAAQC,EAIRC,EAAOC,EAKPC,EAAUC,EAAA,EACVC,EAAalC,EAAA,EACbmC,EAAgBC,EAAA,EAEhBC,EAAUlC,EAAqB,IAAI,EACnCE,EAAUF,EAAI,EAAK,EAEnBmC,EAAYC,EAAS,IAAM,CAAC,CAACX,EAAM,KAAK,EACxCY,EAAYD,EAAS,CACzB,IAAK,IAAMX,EAAM,QACjB,IAAMa,GAAUX,EAAK,iBAAkBW,CAAK,CAAA,CAC7C,EAEKC,EAAWvC,EAAI,CACnB,YAAa,GACb,SAAU,GACV,QAAS,GACT,OAAQ,EACR,OAAQ,UACR,YAAa,KAAK,IAAA,EAClB,OAAQ,EAAA,CACT,EAGKwC,EAAkBJ,EAAS,IACxBJ,EAAc,UAAU,IAAKS,IAAwB,CAC1D,MAAO,GAAGA,EAAS,IAAI,MAAMA,EAAS,OAAO,GAC7C,MAAOA,EAAS,EAAA,EAChB,CACH,EAGKC,EAAgB,CACpB,CAAE,MAAOC,EAAoB,SAAS,EAAG,MAAO,SAAA,EAChD,CAAE,MAAOA,EAAoB,WAAW,EAAG,MAAO,WAAA,EAClD,CAAE,MAAOA,EAAoB,YAAY,EAAG,MAAO,YAAA,EACnD,CAAE,MAAOA,EAAoB,SAAS,EAAG,MAAO,SAAA,EAChD,CAAE,MAAOA,EAAoB,WAAW,EAAG,MAAO,WAAA,EAClD,CAAE,MAAOA,EAAoB,WAAW,EAAG,MAAO,WAAA,CAAY,EAG1DC,EAAmB,CACvB,YAAa,CAAC,CAAE,SAAU,GAAM,QAAS,QAAS,QAAS,SAAU,EACrE,SAAU,CAAC,CAAE,SAAU,GAAM,QAAS,SAAU,QAAS,OAAQ,EACjE,QAAS,CAAC,CAAE,SAAU,GAAM,QAAS,QAAS,QAAS,OAAQ,EAC/D,OAAQ,CAAC,CAAE,SAAU,GAAM,QAAS,UAAW,QAAS,SAAU,EAClE,YAAa,CAAC,CAAE,SAAU,GAAM,KAAM,SAAU,QAAS,UAAW,QAAS,QAAA,CAAU,CAAA,EAIzF,SAASC,EAAqB9B,EAAoB,CAChD,MAAM0B,EAAWT,EAAc,UAAU,KAAMc,GAAgBA,EAAE,KAAO/B,CAAU,EAC9E0B,GAAY,CAACN,EAAU,QACzBI,EAAS,MAAM,QAAUE,EAAS,SAAW,GAEjD,CAGA,SAASM,GAA0B,CACjC,MAAMC,MAAU,KACVC,EAAOD,EAAI,YAAA,EACXE,EAAQ,OAAOF,EAAI,SAAA,EAAa,CAAC,EAAE,SAAS,EAAG,GAAG,EAClDG,EAAM,OAAOH,EAAI,QAAA,CAAS,EAAE,SAAS,EAAG,GAAG,EAC3CI,EAAS,KAAK,MAAM,KAAK,OAAA,EAAW,GAAI,EAAE,SAAA,EAAW,SAAS,EAAG,GAAG,EAC1E,MAAO,MAAMH,CAAI,GAAGC,CAAK,GAAGC,CAAG,GAAGC,CAAM,EAC1C,CAGA,SAASC,GAAY,CACnBd,EAAS,MAAQ,CACf,YAAa,GACb,SAAUQ,EAAA,EACV,QAAS,GACT,OAAQ,EACR,OAAQ,UACR,YAAa,KAAK,IAAA,EAClB,OAAQ,EAAA,CAEZ,CAGA,SAASO,EAASnC,EAAc,CAC9BoB,EAAS,MAAQ,CACf,YAAapB,EAAM,YACnB,SAAUA,EAAM,SAChB,QAASA,EAAM,QACf,OAAQA,EAAM,QAAU,EACxB,OAAQA,EAAM,OACd,YAAa,IAAI,KAAKA,EAAM,WAAW,EAAE,QAAA,EACzC,OAAQA,EAAM,QAAU,EAAA,CAE5B,CAGA,eAAeoC,GAAe,CAC5B,GAAKrB,EAAQ,MAEb,GAAI,CACF,MAAMA,EAAQ,MAAM,SAAA,EACpBhC,EAAQ,MAAQ,GAEhB,MAAMsD,EAAY,CAChB,YAAajB,EAAS,MAAM,YAC5B,SAAUA,EAAS,MAAM,SACzB,QAASA,EAAS,MAAM,QACxB,OAAQA,EAAS,MAAM,OACvB,OAAQA,EAAS,MAAM,OACvB,YAAa,IAAI,KAAKA,EAAS,MAAM,WAAW,EAAE,cAAc,MAAM,GAAG,EAAE,CAAC,EAC5E,OAAQA,EAAS,MAAM,MAAA,EAGzB,IAAI3B,EACAuB,EAAU,OAASV,EAAM,MAC3Bb,EAAQ,MAAMmB,EAAW,YAAYN,EAAM,MAAM,GAAI+B,CAAS,EAE9D5C,EAAQ,MAAMmB,EAAW,YAAYyB,CAAS,EAG5C5C,EACFiB,EAAQ,MAAMjB,EAAM,SAAW,MAAM,GAErCiB,EAAQ,QAAQM,EAAU,MAAQ,QAAU,OAAO,EACnDR,EAAK,SAAS,EACdU,EAAU,MAAQ,GAEtB,MAAY,CAEZ,QAAA,CACEnC,EAAQ,MAAQ,EAClB,CACF,CAGA,SAASuD,GAAe,CACtBpB,EAAU,MAAQ,EACpB,CAGA,OAAAqB,GAAM,IAAMjC,EAAM,QAAUkC,GAAY,CAClCA,IACElC,EAAM,MACR6B,EAAS7B,EAAM,KAAK,EAEpB4B,EAAA,EAGErB,EAAc,UAAU,SAAW,GACrCA,EAAc,eAAA,EAGpB,CAAC,cArRC4B,GAyFUC,EAAAC,EAAA,EAAA,CAxFA,KAAMzB,EAAA,qCAAAA,EAAS,MAAA0B,GACvB,OAAO,OACN,MAAO5B,EAAA,MAAS,OAAA,OACjB,MAAA,CAAA,MAAA,OAAA,EACC,gBAAe,EAAA,GA4EL,SACT,IAKU,CALV6B,EAKUH,EAAAI,CAAA,EAAA,CALD,QAAQ,OAAK,WACpB,IAA6C,CAA7CD,EAA6CH,EAAAK,CAAA,EAAA,CAAlC,QAAOT,GAAY,WAAE,IAAE,CAAA,GAAArE,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAA,GAAF,KAAE,EAAA,CAAA,WAClC4E,EAEWH,EAAAK,CAAA,EAAA,CAFD,KAAK,UAAW,QAAShE,EAAA,MAAU,QAAOqD,CAAA,aAClD,IAA6B,MAA1BpB,EAAA,MAAS,KAAA,IAAA,EAAA,CAAA,CAAA,2CA9ElB,IAwES,CAxET6B,EAwESH,EAAAM,EAAA,EAAA,SAvEH,UAAJ,IAAIjC,EACH,MAAOK,EAAA,MACP,MAAAK,EACD,kBAAgB,OAChB,cAAY,MACZ,yBAAuB,eAAA,aAEvB,IASc,CATdoB,EAScH,EAAAO,CAAA,EAAA,CATD,MAAM,KAAK,KAAK,aAAA,aAC3B,IAOE,CAPFJ,EAOEH,EAAAQ,CAAA,EAAA,CANQ,MAAO9B,EAAA,MAAS,8BAATnD,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAA2E,GAAAxB,EAAA,MAAS,YAAWwB,GAKpBlB,CAAA,EAJd,QAASL,EAAA,MACV,YAAY,QACZ,WAAA,GACA,UAAA,EAAA,sCAKJwB,EAKcH,EAAAO,CAAA,EAAA,CALD,MAAM,MAAM,KAAK,UAAA,aAC5B,IAGE,CAHFJ,EAGEH,EAAAS,CAAA,EAAA,CAFQ,MAAO/B,EAAA,MAAS,SAAT,iBAAAnD,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAA2E,GAAAxB,EAAA,MAAS,SAAQwB,GAChC,YAAY,WAAA,4BAIhBC,EAOcH,EAAAO,CAAA,EAAA,CAPD,MAAM,KAAK,KAAK,SAAA,aAC3B,IAKE,CALFJ,EAKEH,EAAAS,CAAA,EAAA,CAJQ,MAAO/B,EAAA,MAAS,QAAT,iBAAAnD,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAA2E,GAAAxB,EAAA,MAAS,QAAOwB,GAC/B,YAAY,UACZ,KAAK,WACJ,SAAU,CAAA,QAAA,EAAA,QAAA,CAAA,CAAA,4BAIfC,EAUcH,EAAAO,CAAA,EAAA,CAVD,MAAM,WAAW,KAAK,QAAA,aACjC,IAQiB,CARjBJ,EAQiBH,EAAAU,EAAA,EAAA,CAPP,MAAOhC,EAAA,MAAS,OAAT,iBAAAnD,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAA2E,GAAAxB,EAAA,MAAS,OAAMwB,GAC9B,YAAY,UACX,IAAK,EACL,UAAW,EACZ,MAAA,CAAA,MAAA,MAAA,CAAA,GAEW,SAAO,IAAC,CAAA,GAAA3E,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAA,GAAD,IAAC,EAAA,CAAA,+BAIvB4E,EAMcH,EAAAO,CAAA,EAAA,CAND,MAAM,OAAO,KAAK,QAAA,aAC7B,IAIE,CAJFJ,EAIEH,EAAAQ,CAAA,EAAA,CAHQ,MAAO9B,EAAA,MAAS,OAAT,iBAAAnD,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAA2E,GAAAxB,EAAA,MAAS,OAAMwB,GAC7B,QAASrB,EACV,YAAY,SAAA,4BAIhBsB,EAOcH,EAAAO,CAAA,EAAA,CAPD,MAAM,OAAO,KAAK,aAAA,aAC7B,IAKE,CALFJ,EAKEH,EAAAW,CAAA,EAAA,CAJQ,MAAOjC,EAAA,MAAS,YAAT,iBAAAnD,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAA2E,GAAAxB,EAAA,MAAS,YAAWwB,GACnC,KAAK,OACL,UAAA,GACA,MAAA,CAAA,MAAA,MAAA,CAAA,4BAIJC,EAOcH,EAAAO,CAAA,EAAA,CAPD,MAAM,KAAK,KAAK,QAAA,aAC3B,IAKE,CALFJ,EAKEH,EAAAS,CAAA,EAAA,CAJQ,MAAO/B,EAAA,MAAS,OAAT,iBAAAnD,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAA2E,GAAAxB,EAAA,MAAS,OAAMwB,GAC9B,YAAY,UACZ,KAAK,WACJ,SAAU,CAAA,QAAA,EAAA,QAAA,CAAA,CAAA,uICqFrB,MAAMlC,EAAUC,EAAA,EACV2C,EAASC,GAAA,EACT3C,EAAalC,EAAA,EACbmC,EAAgBC,EAAA,EAEhB0C,EAAgB3E,EAAI,EAAK,EACzB4E,EAAgB5E,EAAkB,IAAI,EACtC6E,EAAY7E,EAA6B,IAAI,EAE7CK,EAAUL,EAAI,CAClB,QAAS,GACT,OAAQ,KACR,YAAa,KACb,UAAW,GACX,QAAS,EAAA,CACV,EAGKwC,EAAkBJ,EAAS,IACxBJ,EAAc,UAAU,IAAKS,IAAwB,CAC1D,MAAO,GAAGA,EAAS,IAAI,MAAMA,EAAS,OAAO,GAC7C,MAAOA,EAAS,EAAA,EAChB,CACH,EAGKC,EAAgB,CACpB,CAAE,MAAOC,EAAoB,SAAS,EAAG,MAAO,SAAA,EAChD,CAAE,MAAOA,EAAoB,WAAW,EAAG,MAAO,WAAA,EAClD,CAAE,MAAOA,EAAoB,YAAY,EAAG,MAAO,YAAA,EACnD,CAAE,MAAOA,EAAoB,SAAS,EAAG,MAAO,SAAA,EAChD,CAAE,MAAOA,EAAoB,WAAW,EAAG,MAAO,WAAA,EAClD,CAAE,MAAOA,EAAoB,WAAW,EAAG,MAAO,WAAA,CAAY,EAI1DxC,EAAaiC,EAA0B,KAAO,CAClD,KAAML,EAAW,WAAW,KAC5B,SAAUA,EAAW,WAAW,SAChC,UAAW,KAAK,KAAKA,EAAW,WAAW,MAAQA,EAAW,WAAW,QAAQ,EACjF,UAAWA,EAAW,WAAW,MACjC,eAAgB,GAChB,UAAW,CAAC,GAAI,GAAI,GAAI,GAAG,EAC3B,SAAW+C,GAAiB,CAC1B/C,EAAW,WAAW,KAAO+C,EAC7BC,EAAA,CACF,EACA,iBAAmBC,GAAqB,CACtCjD,EAAW,WAAW,SAAWiD,EACjCjD,EAAW,WAAW,KAAO,EAC7BgD,EAAA,CACF,CAAA,EACA,EAGIE,EAAU7C,EAAkC,IAAM,CACtD,CACE,MAAO,MACP,IAAK,WACL,MAAO,IACP,SAAU,CAAE,QAAS,EAAA,CAAK,EAE5B,CACE,MAAO,KACP,IAAK,WACL,MAAO,IACP,SAAU,CAAE,QAAS,EAAA,EACrB,OAAS8C,GAAeA,EAAI,UAAU,SAAW,GAAA,EAEnD,CACE,MAAO,KACP,IAAK,UACL,SAAU,CAAE,QAAS,EAAA,EACrB,OAASA,GAAeA,EAAI,SAAW,GAAA,EAEzC,CACE,MAAO,WACP,IAAK,SACL,MAAO,IACP,MAAO,QACP,OAASA,GAAeA,EAAI,OAAS,IAAIA,EAAI,OAAO,QAAQ,CAAC,CAAC,GAAK,GAAA,EAErE,CACE,MAAO,KACP,IAAK,SACL,MAAO,IACP,OAASA,GAAeC,EACtBC,GACA,CAAE,KAAMC,GAAmBH,EAAI,MAAM,EAAG,KAAM,OAAA,EAC9C,CAAE,QAAS,IAAMvC,EAAoBuC,EAAI,MAAM,CAAA,CAAE,CACnD,EAEF,CACE,MAAO,OACP,IAAK,cACL,MAAO,IACP,OAASA,GAAeI,GAAWJ,EAAI,WAAW,CAAA,EAEpD,CACE,MAAO,KACP,IAAK,UACL,MAAO,GACP,MAAO,SACP,OAASA,GAAeC,EACtBI,GACA,CACE,QAAS,QACT,QAAS,CACP,CACE,MAAO,KACP,IAAK,OACL,KAAM,IAAMJ,EAAEK,EAAO,KAAM,CAAE,QAAS,IAAML,EAAE3F,EAAa,CAAA,CAAG,CAAA,EAEhE,CACE,MAAO,KACP,IAAK,SACL,KAAM,IAAM2F,EAAEK,EAAO,KAAM,CAAE,QAAS,IAAML,EAAExF,EAAY,CAAA,CAAG,CAAA,CAC/D,EAEF,SAAW8F,GAAgBC,EAAaD,EAAKP,CAAG,CAAA,EAElD,CACE,QAAS,IAAMC,EACbjB,EACA,CAAE,KAAM,GAAM,KAAM,OAAA,EACpB,CAAE,KAAM,IAAMiB,EAAEK,EAAO,CAAE,KAAM,EAAA,EAAM,CAAE,QAAS,IAAML,EAAE1F,EAAyB,CAAA,CAAG,CAAA,CAAE,CACxF,CACF,CACF,CACF,CACD,EAGD,SAASkG,EAAeC,EAAwB,CAC9C,OAAO7D,EAAW,OAAO,OAAQZ,GAAiBA,EAAM,SAAWyE,CAAM,EAAE,MAC7E,CAGA,SAASC,GAAyB,CAChC,OAAO9D,EAAW,OAAO,OAAO,CAAC+D,EAAa3E,IAAiB2E,GAAO3E,EAAM,QAAU,GAAI,CAAC,CAC7F,CAGA,eAAe4D,GAAa,CAC1B,GAAI,CACF,MAAMhD,EAAW,YAAY1B,EAAQ,KAAK,CAC5C,OAASO,EAAY,CACnBiB,EAAQ,MAAM,UAAYjB,EAAM,OAAO,CACzC,CACF,CAGA,MAAMmF,EAAeC,GAAS,IAAM,CAClCjE,EAAW,WAAW,KAAO,EAC7BgD,EAAA,CACF,EAAG,GAAG,EAGN,SAASkB,EAAiB3D,EAAgC,CACpDA,GACFjC,EAAQ,MAAM,UAAY,IAAI,KAAKiC,EAAM,CAAC,CAAC,EAAE,YAAA,EAAc,MAAM,GAAG,EAAE,CAAC,EACvEjC,EAAQ,MAAM,QAAU,IAAI,KAAKiC,EAAM,CAAC,CAAC,EAAE,YAAA,EAAc,MAAM,GAAG,EAAE,CAAC,IAErEjC,EAAQ,MAAM,UAAY,GAC1BA,EAAQ,MAAM,QAAU,IAE1B0F,EAAA,CACF,CAGA,SAASG,GAAY,CACnBtB,EAAc,MAAQ,KACtBD,EAAc,MAAQ,EACxB,CAGA,SAASwB,GAAgB,CACvBpB,EAAA,CACF,CAGA,SAASW,EAAaU,EAAgBjF,EAAc,CAC9CiF,IAAW,QACbxB,EAAc,MAAQzD,EACtBwD,EAAc,MAAQ,IACbyB,IAAW,UACpBC,EAAalF,CAAK,CAEtB,CAGA,SAASkF,EAAalF,EAAc,CAClCsD,EAAO,QAAQ,CACb,MAAO,OACP,QAAS,YAAYtD,EAAM,QAAQ,eACnC,aAAc,KACd,aAAc,KACd,gBAAiB,SAAY,CAC3B,MAAMP,EAAQ,MAAMmB,EAAW,YAAYZ,EAAM,EAAE,EAC/CP,EACFiB,EAAQ,MAAM,QAAUjB,EAAM,OAAO,GAErCiB,EAAQ,QAAQ,OAAO,EACvBkD,EAAA,EAEJ,CAAA,CACD,CACH,CAGA,SAASuB,GAAgB,CACvBvB,EAAA,CACF,CAEA,OAAAwB,GAAU,IAAM,CACdxB,EAAA,EAEI/C,EAAc,UAAU,SAAW,GACrCA,EAAc,eAAA,CAElB,CAAC,UA7XC3C,EAAA,EAAAC,EAsHM,MAtHNN,GAsHM,CArHJgF,EA6GSH,EAAA2C,EAAA,EAAA,CA7GD,MAAM,OAAQ,SAAU,EAAA,GAEnB,iBACT,IAaU,CAbVxC,EAaUH,EAAAI,CAAA,EAAA,KAAA,WAZR,IAKW,CALXD,EAKWH,EAAAK,CAAA,EAAA,CALD,KAAK,UAAW,QAAOgC,CAAA,GACpB,OACT,IAA+B,CAA/BlC,EAA+BH,EAAA2B,CAAA,EAAA,KAAA,WAAvB,IAAc,CAAdxB,EAAcH,EAAA4C,EAAA,CAAA,CAAA,qBACb,IAEb,eAFa,SAEb,EAAA,EAAA,SACAzC,EAKWH,EAAAK,CAAA,EAAA,CALA,QAAOiC,GAAa,CAClB,OACT,IAAmC,CAAnCnC,EAAmCH,EAAA2B,CAAA,EAAA,KAAA,WAA3B,IAAkB,CAAlBxB,EAAkBH,EAAAnE,EAAA,CAAA,CAAA,qBACjB,IAEb,eAFa,OAEb,EAAA,EAAA,6BAKJ,IAwFU,CAxFVsE,EAwFUH,EAAAI,CAAA,EAAA,CAxFD,SAAA,GAAS,KAAK,OAAA,aACrB,IAuCU,CAvCVD,EAuCUH,EAAAI,CAAA,EAAA,KAAA,WAtCR,IAUU,CAVVD,EAUUH,EAAAS,CAAA,EAAA,CATA,MAAOjE,EAAA,MAAQ,0BAARjB,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAA2E,GAAA1D,EAAA,MAAQ,QAAO0D,GAIfF,EAAAkC,CAAA,CAAA,EAHf,YAAY,WACZ,MAAA,CAAA,MAAA,OAAA,EACA,UAAA,EAAA,GAGW,SACT,IAAkC,CAAlC/B,EAAkCH,EAAA2B,CAAA,EAAA,KAAA,WAA1B,IAAiB,CAAjBxB,EAAiBH,EAAA6C,EAAA,CAAA,CAAA,8CAI7B1C,EAOEH,EAAAQ,CAAA,EAAA,CANQ,MAAOhE,EAAA,MAAQ,yBAARjB,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAA2E,GAAA1D,EAAA,MAAQ,OAAM0D,GAKdF,EAAAkC,CAAA,CAAA,EAJf,YAAY,OACZ,MAAA,CAAA,MAAA,OAAA,EACA,UAAA,GACC,QAASrD,CAAA,qCAIZsB,EAQEH,EAAAQ,CAAA,EAAA,CAPQ,MAAOhE,EAAA,MAAQ,8BAARjB,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAA2E,GAAA1D,EAAA,MAAQ,YAAW0D,GAMnBF,EAAAkC,CAAA,CAAA,EALf,YAAY,OACZ,MAAA,CAAA,MAAA,OAAA,EACA,UAAA,GACA,WAAA,GACC,QAASvD,EAAA,KAAA,+CAIZwB,EAMEH,EAAAW,CAAA,EAAA,CALQ,MAAOK,EAAA,uCAAAA,EAAS,MAAAd,GAITkC,CAAA,EAHf,KAAK,YACL,UAAA,GACA,YAAY,QAAA,4BAMhBjC,EAiCSH,EAAA8C,EAAA,EAAA,CAjCA,KAAM,EAAI,QAAO,EAAA,aACxB,IAMO,CANP3C,EAMOH,EAAA+C,CAAA,EAAA,KAAA,WALL,IAIc,CAJd5C,EAIcH,EAAAgD,CAAA,EAAA,CAJD,MAAM,OAAQ,MAAOhD,EAAA9B,CAAA,EAAW,WAAW,KAAA,GAC3C,SACT,IAAkE,CAAlEiC,EAAkEH,EAAA2B,CAAA,EAAA,CAA1D,KAAK,KAAK,MAAM,SAAA,aAAU,IAAuB,CAAvBxB,EAAuBH,EAAAiD,EAAA,CAAA,CAAA,qCAI/D9C,EAMOH,EAAA+C,CAAA,EAAA,KAAA,WALL,IAIc,CAJd5C,EAIcH,EAAAgD,CAAA,EAAA,CAJD,MAAM,MAAO,MAAOlB,EAAc,WAAA,CAAA,GAClC,SACT,IAAqE,CAArE3B,EAAqEH,EAAA2B,CAAA,EAAA,CAA7D,KAAK,KAAK,MAAM,SAAA,aAAU,IAA0B,CAA1BxB,EAA0BH,EAAA5E,EAAA,CAAA,CAAA,qCAIlE+E,EAMOH,EAAA+C,CAAA,EAAA,KAAA,WALL,IAIc,CAJd5C,EAIcH,EAAAgD,CAAA,EAAA,CAJD,MAAM,MAAO,MAAOlB,EAAc,YAAA,CAAA,GAClC,SACT,IAA0D,CAA1D3B,EAA0DH,EAAA2B,CAAA,EAAA,CAAlD,KAAK,KAAK,MAAM,SAAA,aAAU,IAAe,CAAfxB,EAAeH,EAAAkD,EAAA,CAAA,CAAA,qCAIvD/C,EAUOH,EAAA+C,CAAA,EAAA,KAAA,WATL,IAQc,CARd5C,EAQcH,EAAAgD,CAAA,EAAA,CAPZ,MAAM,YACL,MAAOhB,EAAA,EACP,UAAW,CAAA,GAED,SACT,IAA0D,CAA1D7B,EAA0DH,EAAA2B,CAAA,EAAA,CAAlD,KAAK,KAAK,MAAM,SAAA,aAAU,IAAe,CAAfxB,EAAeH,EAAAmD,EAAA,CAAA,CAAA,6CAOzDhD,EAQEH,EAAAoD,EAAA,EAAA,CAPC,QAAShC,EAAA,MACT,KAAMpB,EAAA9B,CAAA,EAAW,OACjB,QAAS8B,EAAA9B,CAAA,EAAW,QACpB,WAAY5B,EAAA,MACZ,UAAU+E,GAAeA,EAAI,GAC7B,SAAU,GACX,QAAA,EAAA,8EAMNlB,EAIEkD,GAAA,CAHQ,QAASvC,EAAA,wCAAAA,EAAa,MAAAZ,GAC7B,MAAOa,EAAA,MACP,UAAS0B,CAAA","x_google_ignoreList":[0,1,2,3,4]}